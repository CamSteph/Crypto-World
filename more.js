const moreLink=document.querySelector('[data-more-link]');const moreLink2=document.querySelector('[data-more-link2]');moreLink2.style.textDecoration='underline';moreLink2.style.textDecorationColor='#3bcdf1';const openMenuBtn=document.querySelector('[data-open-menu]');const menuLayer=document.querySelector('[data-menu-layer]');const closeMenuBtn=document.querySelector('[data-close-menu]');openMenuBtn.addEventListener('click',()=>{menuLayer.style.transform='translateX(0)'});closeMenuBtn.addEventListener('click',()=>{menuLayer.style.transform='translateX(-100%)'});
class CryptoStatAPI{constructor(){this.arrOfMonthsData,this.totalGraphsBeingUsed=["Open's","High's","Low's"],this.openArray=[],this.highArray=[],this.lowArray=[],this.keys,this.values,this.separatedArrays}async requestCryptoStatAPI(t){try{t=t.toUpperCase();let a=await fetch(`https://alpha-vantage.p.rapidapi.com/query?market=CNY&function=DIGITAL_CURRENCY_MONTHLY&symbol=${t}`,{method:"GET",headers:{"x-rapidapi-host":"alpha-vantage.p.rapidapi.com","x-rapidapi-key":"36d5de7f91mshb4b6b9128caad09p1587e6jsnb8616d16e50f"}}),e=await a.json();if(!e){return void(document.querySelector("[data-chart-container]").innerHTML='<span class="no-data-msg">UH-OH! <b><ion-icon name="sad"></ion-icon></b>There is no data for this ticker. \n Check back later or try another ticker</span>')}this.arrOfMonthsData=Object.entries(e["Time Series (Digital Currency Monthly)"]),this.keys=Object.keys(e["Time Series (Digital Currency Monthly)"]),this.values=Object.values(e["Time Series (Digital Currency Monthly)"]),this.generateGraphs(this.arrOfMonthsData)}catch(t){return void(document.querySelector("[data-chart-container]").innerHTML='<span class="no-data-msg">UH-OH! <b><ion-icon name="sad"></ion-icon></b>There is no data for this ticker. \n Check back later or try another ticker</span>')}}generateGraphs(t){let a=document.querySelector("[data-chart-container]");a.innerHTML="";for(let t=0;t<this.totalGraphsBeingUsed.length;t++)a.innerHTML+='\n                <div class="chart-wrapper">\n                    <span class="chart-wrapper-title">'+this.totalGraphsBeingUsed[t]+':</span>\n                    <canvas id="myChart'+(t+1)+'" width="400" height="300" style="padding: 15px; background: #090909; border-radius: 5px;"></canvas>\n                </div>\n            ';this.splitArrays(this.arrOfMonthsData);for(let t=0;t<this.totalGraphsBeingUsed.length;t++){const a=document.getElementById(`myChart${t+1}`).getContext("2d");new Chart(a,{type:"line",data:{labels:[this.arrOfMonthsData[4][0],this.arrOfMonthsData[3][0],this.arrOfMonthsData[2][0],this.arrOfMonthsData[1][0],"Today"],datasets:[{label:this.totalGraphsBeingUsed[t]+":",data:[parseFloat(this.separatedArrays[t][4]).toFixed(2),parseFloat(this.separatedArrays[t][3]).toFixed(2),parseFloat(this.separatedArrays[t][2]).toFixed(2),parseFloat(this.separatedArrays[t][1]).toFixed(2),parseFloat(this.separatedArrays[t][0]).toFixed(2)],backgroundColor:["#3bcdf1"],borderColor:["rgba(99, 132, 255, 0.38)"],borderWidth:4,pointRadius:5,cubicInterpolationMode:"monotone",tension:.94}]},options:{animations:{tension:{duration:1e3,easing:"linear",from:1,to:0,loop:!0}},scales:{y:{beginAtZero:!0}},plugins:{title:{display:!0,text:"Last 5 Month "+this.totalGraphsBeingUsed[t],padding:{top:10,bottom:30}}}}})}}splitArrays(t){for(let t=0;t<5;t++)this.values[t]["1b. open (USD)"]&&this.openArray.push(this.values[t]["1b. open (USD)"]),this.values[t]["2b. high (USD)"]&&this.highArray.push(this.values[t]["2b. high (USD)"]),this.values[t]["3b. low (USD)"]&&this.lowArray.push(this.values[t]["3b. low (USD)"]);this.separatedArrays=[this.openArray,this.highArray,this.lowArray]}}
const searchTickerBtnEnter = document.querySelector('[data-search-ticker-enter]');
const searchTickerBtnSelect = document.querySelector('[data-search-ticker-select]');
searchTickerBtnEnter.addEventListener('click',()=>{const crypto_stat_api_obj=new CryptoStatAPI();let ticker=document.getElementById('enter-search').value;if(ticker){crypto_stat_api_obj.requestCryptoStatAPI(ticker)}})
searchTickerBtnSelect.addEventListener("click",(()=>{const e=new CryptoStatAPI;let t=document.getElementById("select-search").value;"0"!==t&&e.requestCryptoStatAPI(t)}));